<!DOCTYPE html>
<html lang="en">
    <head>
        <title>To-Do List</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='todo.css') }}">
    </head>
    
<body>


    <nav class="navbar">
        <div class="logo"><span class="taskflow-font">TaskFlow</span></div>
        <ul class="nav-links">
            <li><a href="#home">Home</a></li>
            <li><a href="#tasks">Tasks</a></li>
            <li><a href="#timer">Timer</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
        <div class="nav-buttons">
            <a href="{{ url_for('logout') }}" class="btn logout-btn">Log Out</a>
            <button id="toggleMode" class="btn mode-btn">Light Mode</button>
        </div>
    </nav>


   <section id="home">
        <h2>Welcome to TaskFlow</h2>
    </section>
    
    <section id="tasks">
        <h2>To-Do List</h2>
        <div class="container">
            <div class="todo-section">
                <h3>Your Tasks</h3>
                <form method="POST">
                    <input type="text" name="task" placeholder="New Task" required>
                    <button type="submit">Add Task</button>
                </form>
                <ul>
                    {% for task in tasks %}
                        <li>
                            {{ task[1] }}
                            <form action="{{ url_for('delete_task', task_id=task[0]) }}" method="POST">
                                <button type="submit" class="delete-btn">Remove</button>
                            </form>
                        </li>
                    {% endfor %}
                </ul>
            </div>
    
            <div class="quote-section">
                <h3>Motivational Quotes ({{ quote_count }})</h3>
                <ul>
                    {% for quote in quotes %}
                        <li>
                            {{ loop.index }}. {{ quote[1] }} {{ quote[2] }}
                            <form action="{{ url_for('delete_quote', quote_id=quote[0]) }}" method="POST">
                                <button type="submit" class="delete-btn">Remove</button>
                            </form>
                        </li>
                    {% endfor %}
                </ul>
                <form method="POST" action="{{ url_for('add_quote') }}">
                    <input type="text" name="quote" placeholder="New Quote" required>
                    <input type="text" name="emoji" placeholder="Emoji (optional)">
                    <button type="submit">Add Quote</button>
                </form>
            </div>
        </div>
    </section>
    
    <section id="timer">
        <h2>Timer Section (Coming Soon)</h2>
    </section>
    
    <section id="contact">
        <div class="contact-container">
            <!-- Left: Contact Form -->
            <div class="contact-form">
                <h2>Get in Touch !</h2>
                <p>Please fill out the quick form and I will be in touch in good time.</p>
                
                <form name="submit-to-google-sheet">
                    <input type="text" name="Name" placeholder="Name" required>
                    <input type="email" name="Email" placeholder="Your email address" required>
                    <textarea name="Message" rows="4" placeholder="Message"></textarea>
                    <button type="submit" class="btn submit-btn">Submit</button>
                </form>
                <span id="msg"></span>
            </div>
    
            <!-- Right: Contact Info -->
            <div class="contact-info">
                <h3>Connect with me:</h3>
                <p>For support or any questions:</p>
                <p>Email me at <a href="mailto:support@taskflow.com">supportingyou@taskflow.com</a></p>
    
                <h4>Taskflow City</h4>
                <p>123 Productivity Road, Suite 2,<br> The Tasks Avenue 56632 <br> UK</p>

                <h4>TaskFlow Town</h4>
                <p>456 Working Road, Suite 6,<br> Management Street 456<br> UK</p>

            </div>
        </div>
    </section>
    
    
   
    
    
    <div class="copyright">
        <p>Made by Jiali Huang. All Rights Reserved</p>
    </div>
    
    <script>
        const scriptURL = "https://script.google.com/macros/s/AKfycbzmL3F2sHl3M32zbpw8ct-HGrSs3PDfprF8049zlXi7YF-X-bxanU_zeMDjP6XCeoN5/exec";
        const form = document.forms["submit-to-google-sheet"];
        const msg = document.getElementById("msg");
        
        if (!form) {
            console.error("‚ùå Form not found! Check the form name.");
        } else {
            console.log("‚úÖ Form detected successfully.");
        }
        
        form.addEventListener("submit", e => {
            e.preventDefault();
            console.log("üì© Form submitted!");
        
            fetch(scriptURL, { method: "POST", body: new FormData(form) })
                .then(response => {
                    console.log("‚úÖ Response received:", response);
                    msg.innerHTML = "‚úÖ Message sent successfully!";
                    msg.style.color = "green";
                    setTimeout(() => { msg.innerHTML = ""; }, 5000);
                    form.reset();
                })
                .catch(error => {
                    console.error("‚ùå Error:", error.message);
                    msg.innerHTML = "‚ùå Failed to send message!";
                    msg.style.color = "red";
                });
        });
        
    </script>
</body>
</html>
